<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<? wbs_initLayout ?>
		<link rel='stylesheet' type='text/css' href='../../../common/html/cssbased/2.0.adapter.css'>
		<script src="../../../common/html/classic/styles/calendar.js" type="text/javascript"></script>

		<script language="JavaScript">
		<!--

			function setDateMode( control, value )
			{
				thisForm = document.forms[0];

				for ( i = 0; i < thisForm.elements.length; i++ )
					if (thisForm.elements[i].type == 'radio')
						if ( thisForm.elements[i].name == control && thisForm.elements[i].value == value ) {
							thisForm.elements[i].checked = true;
							break;
						}
			}

		//-->
		</script>
	</head>

	<body onLoad="autoFocusFormControl( '<? $invalidField ?>', 'folderData' )">
		<? wbs_pageLayout toolbar="rep_toolbar.htm" ?>
			<? wbs_errorBlock ?>

			<? if !$fatalError ?>

				<? wbs_formLayout caption=$pageTitle ?>
					<? wbs_formContent ?>

						<tr>
							<td><input type=radio name="repSettings[type]" value=days <? switchedOutput val=$repSettings.type true_val=days str1="checked " ?>/></td>
							<td><? wbs_label for="days" text=$ddStrings.rep_last_label|cat skipColon=true ?></td>
							<td><input class="FormControl" onchange="setDateMode('repSettings[type]', 'days')" type=text value="<? $repSettings.days|htmlsafe:true:true ?>" name="repSettings[days]" id="days" style="width: 30px"><? " "|cat:$ddStrings.rep_days_label ?></td>
						</tr>
						<tr>
							<td><input type=radio name="repSettings[type]" value=range <? switchedOutput val=$repSettings.type true_val=range str1="checked " ?>/></td>
							<td><? wbs_label for="fromdate" text=$ddStrings.rep_daterange_label skipColon=true ?></td>
							<td>
								<input type=text value="<? $repSettings.from|htmlsafe:true:true ?>" class="FormControl" name="repSettings[from]" size=10 id=fromdate onchange="setDateMode('repSettings[type]', 'range')"/>
								<?include file="../../../common/html/classic/calendar.tpl" style="margin-left: 2px" name="fromdate"?>

								<? wbs_label for="todate" text=$cmStrings.$ddStrings.rep_to_label skipColon=true ?>
								<input type=text class="FormControl" value="<? $repSettings.to|htmlsafe:true:true ?>" name="repSettings[to]" size=10 id=todate onchange="setDateMode('repSettings[type]', 'range')">
								<?include file="../../../common/html/classic/calendar.tpl"  style="margin-left: 2px" name="todate"?>
							</td>
						</tr>

					<? /wbs_formContent ?>
				<? wbs_formButtonsPanel ?>
						<? wbs_buttonSet ?>
							<? wbs_buttonSetButton caption=$ddStrings.rep_show_btn name="showbtn" ?>
						<? /wbs_buttonSet ?>
				<? /wbs_formButtonsPanel ?>
				<? /wbs_formLayout ?>


				<? if $reportGenerated ?>
				<table class="SimpleList ReportTable">
					<thead>
						<tr>
							<th width=300><? $ddStrings.rep_fuffilename_title ?></th>
							<th><? $ddStrings.rep_fufversions_title ?></th>
							<th><? $ddStrings.rep_fufusername_title ?></th>
						</tr>
					</thead>

					<tbody>
						<? foreach from=$reportData item=fileData name=reportLoop ?>
							<tr>
								<td><? $fileData.DL_FILENAME|htmlsafe:true:true ?></td>
								<td><? $fileData.CNT|sureecho ?></td>
								<td><? $fileData.DL_UPLOADUSERNAME|sureecho ?></td>
							</tr>
						<? foreachelse ?>
							<tr class="NoRecords">
							<td colspan="3">
								<? $ddStrings.rep_norecords_label|htmlsafe:true:true ?>
							</td>
							</tr>
						<? /foreach ?>
					</tbody>
				</table>

				<? /if ?>
				
			<? else ?>
				<? wbs_buttonSet ?>
					<? wbs_buttonSetButton name="cancelbtn" caption=$kernelStrings.app_cancel_btn ?>
				<? /wbs_buttonSet ?>
			<? /if ?>

		<? /wbs_pageLayout ?>
	</body>
</html>