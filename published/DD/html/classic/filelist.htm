<? if $viewMode == 0 ?>
	<div style="overflow: auto; width: 100%; height: 100%" id="rightscrolldiv">
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="treeDocumentListTable">
				<tr height=20>
					<? if $numFiles ?>
						<th align="left" width="10px" style="width: 10px"><input type="checkbox" name="selectAllDocsCB" onClick="treeSelectAll(this)"></th>
					<? /if ?>
					<? if $versionControlEnabled ?>
						<th align="left" width="16px" style="width: 16px"><img src="<? "images/lock.gif"|stylesetitem:"classic":$styleSet:"DD" ?>" ></th>
					<? /if ?>
					<th align="left"><? makeSortHeader URL=$genericLinkUnsorted fieldName="DL_FILENAME" curStatus=$sorting text=$ddStrings.app_file_field descImg=#sortImgDesc# ascImg=#sortImgAsc# ?></th>
					<? if $searchString != "" ?>
						<th align="left"><? makeSortHeader URL=$genericLinkUnsorted fieldName="DF_NAME" curStatus=$sorting text=$ddStrings.app_folder_field descImg=#sortImgDesc# ascImg=#sortImgAsc# ?></th>
					<? /if ?>

					<? foreach from=$visibleColumns item=columnID ?>
						<? assign var=nameIndex value=$dd_columnNames[$columnID] ?>
						<? assign var=columnName value=$ddStrings[$nameIndex] ?>
						<th <? if $columnID != "DL_FILESIZE" ?>align=left<? else ?>align=right<? /if ?>><? makeSortHeader URL=$genericLinkUnsorted fieldName=$columnID curStatus=$sorting text=$columnName descImg=#sortImgDesc# ascImg=#sortImgAsc# ?></th>
					<? /foreach ?>

					<? if $numFiles && ($curFolderData->TREE_ACCESS_RIGHTS > 0 ||  $searchString != "") ?>
						<th align="left" width=12>&nbsp;</th>
					<? /if ?>
				</tr>
			<? foreach from=$files item=file name=fileLoop ?>
				<tr <? if ($smarty.foreach.fileLoop.iteration % 2) == 0 ?>bgcolor="<? #oddRowsColor#?>"<?else?>bgcolor=<? #evenRowsColor# ?><? /if ?>>
					<? if $numFiles ?>
						<td align=left valign=top width="10px" style="width: 10px"><input type="checkbox" name="document[<? $file.DL_ID ?>]" value="<? $file.DL_ID ?>"><input type=hidden name="filerights[<?$file.DL_ID?>]" value="<? $file.TREE_ACCESS_RIGHTS ?>"></td>
					<? /if ?>
					<? if $versionControlEnabled ?>
						<td align="left" width="16px" style="width: 16px"><? if $file.DL_CHECKSTATUS == "OUT" ?><img title="<? $file.CHECKOUTMESSAGE|htmlsafe:true:true ?>" src="<? "images/lock.gif"|stylesetitem:"classic":$styleSet:"DD" ?>" ><? else ?>&nbsp;<? /if ?></td>
					<? /if ?>
					<td align=left valign=top>
					<!-- thumbnail -->
					<? if $displayIcons ?>
						<a href="<? $file.ROW_URL ?>" target="_blank"><img src="<? thumbnail fileName=$file.DL_FILENAME size=16 os=win ?>" align=absmiddle border=0></a>
					<? /if ?>

					<!-- file name -->
					<a href="<? $file.ROW_URL ?>" target="_blank"><? $file.DL_FILENAME|htmlsafe:true:true|sureecho|trunc_str:50 ?></a></td>
					<? if $searchString != "" ?>
						<td align=left valign=top><a href="<? $file.FOLDER_URL ?>" title="<? $ddStrings.dd_screen_openfld_hint ?>"><? $file.DF_NAME|htmlsafe:true:true|sureecho ?></a></td>
					<? /if ?>

					<? foreach from=$visibleColumns item=columnID ?>
						<td <? if $columnID != "DL_FILESIZE" ?>align=left<? else ?>align=right<? /if ?> valign=top>
							<? if $columnID != "DL_DESC" ?>
								<? $file.$columnID|htmlsafe:true:true|sureecho ?>
							<? else ?>
								<? if $restrictDescLen ?>
									<? assign var=DESC_LEN value=$file.$columnID|htmlsafe:true:true|strlen ?>
									<span><? $file.$columnID|htmlsafe:true:true|sureecho|trunc_str:$restrictDescLen ?></span>
									<? if $DESC_LEN > $restrictDescLen ?>
										[<a class=activelink href="<? $file.VIEW_DESC_URL ?>"><? $ddStrings.dd_screen_more_label ?></a>]
									<? /if ?>
								<? else ?>
									<? $file.$columnID|htmlsafe:true:true|sureecho ?>
								<? /if ?>
							<? /if ?>
						</td>
					<? /foreach ?>
					<? if $numFiles && ($curFolderData->TREE_ACCESS_RIGHTS > 0 || $searchString != "") ?>
						<td align=left align=center valign=top width=12>
							<? if $numFiles ?>
								<a href=<? $file.DESC_URL ?> title="<? $ddStrings.dd_screen_fileproperties_hint ?>"><img src="<? "images/property.gif"|stylesetitem:"classic":$styleSet ?>" border="0" width="17" height="11" style="margin-top: 4px" border=0></a>
							<? else ?>
								&nbsp;
							<? /if ?>
							</td>
					<? /if ?>
				</tr>
			<? foreachelse ?>
				<? if $searchString != "" ?>
					<tr><td colspan="<? $numColumns ?>" align="center"><div class="noentries"><? $ddStrings.dd_screen_nofiles_text|htmlsafe:true:true ?></div></td></tr>		
				<? else ?>
					<? math equation="x - 1" x=$numColumns assign=numColumns?>
					<tr><td colspan="<? $numColumns ?>" align="center"><div class="noentries"><? $ddStrings.dd_screen_nofiles_text|htmlsafe:true:true ?></div></td></tr>
				<? /if ?>
			<? /foreach ?>
		</table>
		<? include file="../../../common/html/classic/tree_templates/tree_pages.htm" ?>
	</div>
<? elseif $viewMode == 1 || $viewMode == 2 || $viewMode == 3 ?>
	<!-- List mode -->
	<script language="JavaScript">treeRightPanelHeaderObj = "rightPanelHeader";</script>
	<table width="100%" border="0" cellspacing="0" cellpadding="0" class="treeDocumentListViewTable noBottomBorder" id="rightPanelHeader">
		<? if $numFiles != 0 ?>
				<tr>
					<th align=left colspan=3>
						<table width="100%" border="0" cellspacing="0" cellpadding="0" class="treeDocumentListViewHeader">
							<tr>
								<td><input type="checkbox" name="selectAllDocsCB" onClick="treeSelectAll(this)"></td>
								<td align=right nowrap><nobr>
									<? $ddStrings.dd_screen_sorting_title|cat:":&nbsp;" ?>
									<? makeSortHeader URL=$genericLinkUnsorted fieldName="DL_FILENAME" curStatus=$sorting text=$ddStrings.dd_screen_namesorting_title descImg=#sortImgDesc# ascImg=#sortImgAsc# ?>
									<? if $numVisibleColumns ?> | <? /if ?>
									<? assign var=numVisibleHeaderColumns value=$numVisibleColumns ?>

									<? if $descriptionVisible ?>
										<? assign var=nameIndex value=$dd_columnNames.DL_DESC ?>
										<? assign var=columnName value=$ddStrings[$nameIndex] ?>
										<? makeSortHeader URL=$genericLinkUnsorted fieldName=DL_DESC curStatus=$sorting text=$columnName descImg=#sortImgDesc# ascImg=#sortImgAsc# ?>
										<? if $numVisibleColumns > 1 ?> | <? /if ?>
										<? math equation="x - 1" x=$numVisibleColumns assign=numVisibleHeaderColumns ?>
									<? /if ?>

									<? assign var=index value=0 ?>
									<? foreach from=$visibleColumns item=columnID name=columnLoop ?>
										<? if $columnID != "DL_DESC" ?>
											<? math equation="x + 1" x=$index assign=index ?>
											<? assign var=nameIndex value=$dd_columnNames[$columnID] ?>
											<? assign var=columnName value=$ddStrings[$nameIndex] ?>
											<? makeSortHeader URL=$genericLinkUnsorted fieldName=$columnID curStatus=$sorting text=$columnName descImg=#sortImgDesc# ascImg=#sortImgAsc# ?>
											<? if $index < $numVisibleHeaderColumns ?> | <? /if ?>
										<? /if ?>
									<? /foreach ?>
									&nbsp;
									</nobr>
								</td>
							</tr>
						</table>
					</th>
				</tr>
		<? /if ?>
	</table>
	<div style="overflow: auto; width: 100%; height: 100%" id="rightscrolldiv">
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
			<? if $viewMode == 1 || $viewMode == 2 ?>
				<!-- List view -->
				<? foreach from=$files item=file name=fileLoop ?>
					<tr>
						<td rowspan=2 align=left valign=top width="10px" style="width: 10px"><input type="checkbox" name="document[<? $file.DL_ID ?>]" value="<? $file.DL_ID ?>"><input type=hidden name="filerights[<?$file.DL_ID?>]" value="<? $file.TREE_ACCESS_RIGHTS ?>"></td>
						<td rowspan=2 valign=top style="padding-bottom: 4px">
								<? if $viewMode == 1 ?>
									<? if $displayIcons ?>
										<a href="<? $file.ROW_URL ?>" target="_blank"><img border=0 style="margin-right: 5px; margin-top: 5px" src="<? thumbnail fileName=$file.DL_FILENAME size=32 os=win ?>" align=absmiddle></a>
									<? /if ?>
								<? else ?>
									<? include file="../../../common/html/classic/thumbnails_templates/thumbnail.htm" srcURL=$file.THUMB_URL size=96" URL=$file.ROW_URL ?>
								<? /if ?>
						</td>
						<td align=left valign=top width="100%">
							<a href="<? $file.ROW_URL ?>" target="_blank"><? $file.DL_FILENAME|htmlsafe:true:true|sureecho|trunc_str:50 ?></a>
							<? if $numFiles ?>
								<a href=<? $file.DESC_URL ?>><img title="<? $ddStrings.dd_screen_fileproperties_hint ?>" src="<? "images/property.gif"|stylesetitem:"classic":$styleSet ?>" border="0" width="17" height="11" style="margin-top: 4px" border=0></a>
							<? /if ?>
						</td>
					</tr>
					<tr>
						<td valign=top>
							<? if $numVisibleColumns ?>
								<table border="0" cellspacing="0" cellpadding="0">
									<tr>
										<td class="treeDocumentListViewContent">
											<? if $file.DL_DESC && $descriptionVisible ?>
												<div style="border-bottom: 1px solid #CCCCCC; margin-right: 5px; padding-bottom: 5px; margin-bottom: 5px; padding-top: 5px; ">
													<? if $restrictDescLen ?>
														<? assign var=DESC_LEN value=$file.DL_DESC|htmlsafe:true:true|strlen ?>
														<span><? $file.DL_DESC|htmlsafe:true:true|sureecho|trunc_str:$restrictDescLen ?></span>
														<? if $DESC_LEN > $restrictDescLen ?>
															[<a class=activelink href="<? $file.VIEW_DESC_URL ?>"><? $ddStrings.dd_screen_more_label ?></a>]
														<? /if ?>
													<? else ?>
														<? $file.DL_DESC|htmlsafe:true:true|sureecho ?>
													<? /if ?>
												</div>
											<? /if ?>

											<? foreach from=$visibleColumns item=columnID name=columnLoop ?>
												<? if $columnID != "DL_DESC" && $columnID != "DL_MODIFYUSERNAME" && $columnID != "DL_MODIFYDATETIME" ?>
													<? assign var=nameIndex value=$dd_columnNames[$columnID] ?>
													<? assign var=columnName value=$ddStrings[$nameIndex] ?>

													<? if $file.$columnID != "" ?>
														<? $columnName|cat:": "|cat:$file.$columnID|htmlsafe:true:true|sureecho ?>
														<? if $smarty.foreach.columnLoop.iteration < $numVisibleColumns ?>&nbsp;<? /if ?>
													<? else ?>
														<? $columnName|cat:":&nbsp;-&nbsp;"?>
													<? /if ?>
												<? /if ?>
											<? /foreach ?>
										</td>
									</tr>
									<tr>
										<? if $versionControlEnabled ?>
											<td align="left" class="treeDocumentListViewContent" style="padding-bottom: 5px; padding-top: 5px">
													<? if $file.DL_CHECKSTATUS == "OUT" ?>
														<img align=absmiddle title="<? $file.CHECKOUTMESSAGE|htmlsafe:true:true ?>" src="<? "images/lock.gif"|stylesetitem:"classic":$styleSet:"DD" ?>" >
														<? $file.CHECKOUTMESSAGE|htmlsafe:true:true ?>
													<? else ?>&nbsp;<? /if ?>
											</td>
										<? /if ?>
									</tr>
								</table>
							<? /if ?>
						</td>
					</tr>
					<? if $smarty.foreach.fileLoop.iteration <> $numFiles ?>
						<tr>
							<td colspan=2 style="height: 5px"></td>
						</tr>
					<? /if ?>
				<? foreachelse ?>
					<tr><td align="center"><div class="noentries"><? $ddStrings.dd_screen_nofiles_text|htmlsafe:true:true ?></div></td></tr>
				<? /foreach ?>
					<tr>
						<td class=topBorder colspan=3>
							<? include file="../../../common/html/classic/tree_templates/tree_pages.htm" ?>
						</td>
					</tr>
			<? else ?>
			<!-- Thumbnail tile view -->
				<tr>
					<td>
						<? foreach from=$files item=file name=fileLoop ?>
							<div style="float: left; width: 110px; height: 155px">

									<? if $restrictDescLen ?>
										<? assign var=truncDesc value=$file.DL_DESC|htmlsafe:true:true|trunc_str:$restrictDescLen ?>
									<? else ?>
										<? assign var=truncDesc value=$file.DL_DESC|htmlsafe:true:true|trunc_str ?>
									<? /if ?>

									<? assign var=thumbTitle value=$file.DL_FILENAME|cat:". "|cat:$file.DL_FILESIZE|htmlsafe:true:true?>
									<? if $truncDesc != "" ?>
										<? assign var=thumbTitle value=$thumbTitle|cat:". "|cat:$truncDesc ?>
									<? /if ?>

									<? include file="../../../common/html/classic/thumbnails_templates/thumbnail.htm" srcURL=$file.THUMB_URL size=96" URL=$file.ROW_URL ?>
									<div style="padding-top: 5px" class=smallFont align=left>

										<table cellpadding=0 cellspacing=0 border=0 width="110">
											<tr>
												<td width=12 valign=middle><input type="checkbox" name="document[<? $file.DL_ID ?>]" value="<? $file.DL_ID ?>"><input type=hidden name="filerights[<?$file.DL_ID?>]" value="<? $file.TREE_ACCESS_RIGHTS ?>"></td>
												<td  align=center valign=middle><nobr>
													<? if $file.DL_CHECKSTATUS == "OUT" ?>
														<img align=absmiddle title="<? $file.CHECKOUTMESSAGE|htmlsafe:true:true ?>" src="<? "images/lock.gif"|stylesetitem:"classic":$styleSet:"DD" ?>" >
													<? /if ?>
												<a target="_blank" href="<?$file.ROW_URL?>" class=activelink><? $file.DL_FILENAME|truncate:10:"..."|htmlsafe:true:true ?></a></nobr></td>
											</tr>
											<tr>
												<? if $numFiles ?>
													<td width=12><a title="<? $ddStrings.dd_screen_fileproperties_hint ?>" href=<? $file.DESC_URL ?>><img src="<? "images/property.gif"|stylesetitem:"classic":$styleSet ?>" border="0" width="17" height="11" style="margin-left: 3px; margin-top: 4px" border=0></a></td>
												<? /if ?>
												<td class=smallFont align=center <? if !($numFiles && $file.TREE_ACCESS_RIGHTS > 0) ?>colspan=2<? /if ?>><? $file.DL_FILESIZE ?></td>
											</tr>
										</table>
									</div>
							</div>
						<? foreachelse ?>
							<div align=center class="noentries"><? $ddStrings.dd_screen_nofiles_text|htmlsafe:true:true ?></div>
						<? /foreach ?>
					</td>
				</tr>
				<tr>
					<td class=topBorder>
						<? include file="../../../common/html/classic/tree_templates/tree_pages.htm" ?>
					</td>
				</tr>
			<? /if ?>
		</table>
	</div>
<? /if  ?>