<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<? wbs_initLayout ?>
		<script src="../../../common/html/classic/tree_templates/tree_functions.js" type="text/javascript"></script>

		<script type="text/javascript">
			function checkFolderRights()
			{
				obj = findObj("parentFolderID");
				if ( !obj )
					return true;

				selected = obj.selectedIndex;

				if ( obj.options[selected].value == -1 ) {
					alert( '<? $kernelStrings.app_treenofldrights_message ?>' );
					return false;
				}

				return true;
			}

			function changeFolder(obj)
			{
				selected = obj.selectedIndex;

				if ( obj.options[selected].value != -1 )
					obj.form.submit();
			}
		</script>

	</head>
	<body onLoad="autoFocusFormControl( '<? $invalidField ?>', 'folderData' )">
		<? wbs_pageLayout ?>
			<? wbs_errorBlock ?>

			<? if !$fatalError ?>

				<? include file="../../../common/html/cssbased/pageelements/addmodfolder.htm"
						parentFolderLabel=$kernelStrings.app_treeparentfolder_text
						folderNameLabel=$kernelStrings.app_treefurfldname_title
						folderSelectorEvent="changeFolder(this)"
						onSave="return checkFolderRights()"
				?>

			<? else ?>
				<? wbs_button caption=$kernelStrings.app_cancel_btn name="cancelbtn" ?>
			<? /if ?>

		<input type="hidden" name="action" value="<? $action ?>"/>
		<input type="hidden" name="opener" value="<? $opener ?>"/>
		<input type="hidden" name="CF_ID" value="<? $CF_ID?>"/>
		<input type="hidden" name="CF_ID_PARENT" value="<? $CF_ID_PARENT ?>"/>
		<input type="hidden" name="folderData[CF_ID]" value="<? $folderData.CF_ID ?>"/>

		<? /wbs_pageLayout ?>
	</body>
</html>