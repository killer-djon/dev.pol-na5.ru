/*Модуль дополнительные характеристики (расширенная) (версия 1)Разработано: © JOrange.ru*/var timer,	xhr,	xdr = true;	$(function() {	$('.prfilter').each(function(){		var prfilter = $(this);		if(!prfilter.hasClass('prfiler-jsfunction')){			prfilter.addClass('prfiler-jsfunction');						var BlockID = Math.floor((Math.random()*100)+1);			prfilter.find('form').attr('id','prfilter-'+BlockID);						var positionBlock = prfilter.attr('position');			//Hover & Active for buttons			prfilter.find('.prfilter-submit input').hover(function () {$(this).addClass("prfilter-submit-hover");	},function () {$(this).removeClass("prfilter-submit-hover");});				prfilter.find('.prfilter-submit input').mouseup(function(){$(this).removeClass("prfilter-submit-active");}).mousedown(function(){$(this).addClass("prfilter-submit-active");}).mouseout(function(){$(this).removeClass("prfilter-submit-active");});								//Unckeck all options			prfilter.on('click', '.prfilter-uncheck-all', function() { 				if($(this).hasClass('prfilter-uncheck-all-disabled')) return false;				prfilter.find('.prfilter-variant label').each(function(){ $(this).removeClass('selected disabled'); });				prfilter.find('input[type="checkbox"]').each(function(){ $(this).prop('checked', false).attr('disabled',false); });				prfilter.find('input[type="radio"]').each(function(){ $(this).attr('disabled',false); if($(this).val()==''){$(this).prop('checked', true);} });				prfilter.find('input[type="text"]').each(function(){ $(this).val(''); });				prfilter.find('select').each(function(){ if(!$(this).hasClass('prfilter-category-select-notemplate') && !$(this).hasClass('prfilter-category-select')){ $(this).val(''); }});				prfilter.find('select option').each(function(){ $(this).attr('disabled',false); });				prfilter.find('.prfilter-slider').each(function(){ $(this).slider('clean'); });				prfilter_GetProductsAjax($(this),prfilter, positionBlock);				$(this).addClass('prfilter-uncheck-all-disabled');				prfilter.find('.prfilter-uncheck').hide('fast');			});										//Uncheck group options			prfilter.on('click', '.prfilter-uncheck', function() { 				var parent = $(this).closest('.prfilter-option'), title = parent.find('.prfilter-option-title');				parent.find('.prfilter-variant label').each(function(){ $(this).removeClass('selected'); });				parent.find('input[type="checkbox"]').each(function(){ $(this).prop('checked', false) });				parent.find('input[type="radio"]').each(function(){ if($(this).val()==''){$(this).prop('checked', true);} });				parent.find('input[type="text"]').each(function(){ $(this).val(''); });				parent.find('select').each(function(){ $(this).val(''); });				parent.find('.prfilter-slider').each(function(){ $(this).slider('clean'); });				prfilter_GetProductsAjax(title,prfilter, positionBlock);			});				//Selection of parameters			prfilter.on('click', 'input[type="checkbox"]', function() { 				var label = $(this).closest('label');				if(label.attr('withimage')=='yep'){ 					if($(this).is(':checked')){ label.addClass('selected'); }else{ label.removeClass('selected'); } 					prfilter_GetProductsAjax(label.find('img:first'),prfilter, positionBlock);				}else{					prfilter_GetProductsAjax($(this),prfilter, positionBlock);				}			});			prfilter.on('click', 'input[type="radio"]', function() { 				var label = $(this).closest('label');				var inputName = $(this).attr('name');				prfilter.find('input[type="radio"][name="'+inputName+'"]').each(function(){ $(this).closest('label').removeClass('selected'); });				if(label.attr('withimage')=='yep'){ 					label.addClass('selected');					prfilter_GetProductsAjax(label.find('img:first'),prfilter, positionBlock);				}else{					prfilter_GetProductsAjax($(this),prfilter, positionBlock);				}							});			prfilter.on('change', 'select', function() { prfilter_GetProductsAjax($(this),prfilter, positionBlock); });			prfilter.on('blur', 'input[name="opname"]', function() { prfilter_GetProductsAjax($(this),prfilter, positionBlock); });						//Expand/Collapse category			/*prfilter.on('click', 'a.prfilter-category-title', function(e) {				$(this).next('.prfilter-options:first').toggle();				if($(this).next('.prfilter-options').is(":visible")){					$(this).find('i').addClass('prfilter-minus').removeClass('prfilter-plus');				}else{					$(this).find('i').addClass('prfilter-plus').removeClass('prfilter-minus');				}				e.preventDefault();			});						//Expand/Collapse options			prfilter.on('click', 'a.prfilter-option-title', function(e) {				$('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});				var variants = $(this).closest('.prfilter-option').find('.prfilter-variants');				if(variants.is(":visible")){					$(this).find('i').addClass('prfilter-plus').removeClass('prfilter-minus');				}else{					$(this).find('i').addClass('prfilter-minus').removeClass('prfilter-plus');					}				variants.slideToggle('fast');				e.preventDefault();			});*/							//Expand/Collapse the recommended params			prfilter.on('click', 'a.prfilter-shownotrecomended', function(e) {				$('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});				var url = $(this);				var variants = url.closest('.prfilter-option').find('.prfilter-variants');				$(variants).slideDown('fast').find('.prfilter-variant[recomended="0"]').toggleClass('prfilter-notvisible').promise().done(function(){					url.html($(this).hasClass("prfilter-notvisible")?translate.all:translate.recomended);					url.closest('.prfilter-option').find('i').addClass('prfilter-minus').removeClass('prfilter-plus');				});				e.preventDefault();			});							//Link to recommended params			prfilter.find('a.prfilter-shownotrecomended').each(function(){if($(this).closest('.prfilter-option').find('.prfilter-variants').find('.prfilter-variant[recomended="0"]').length>0){$(this).removeClass('prfilter-notvisible'); }});			prfilter.find('.prfilter-options').each(function(){if($(this).find('.prfilter-option[current="1"]').length>0){$(this).removeClass('prfilter-notvisible'); }});			prfilter.find('.prfilter-variant[recomended="0"]').find('input:checked').each(function(){				$(this).closest('.prfilter-variants').find('.prfilter-variant').removeClass('prfilter-notvisible');				$(this).closest('.prfilter-option').find('.prfilter-shownotrecomended').removeClass('prfilter-notvisible').html(translate.recomended);			});						//Sliders			prfilter.find('.prfilter-slider').each(function(){				var slider 		= $(this),					step 		= parseFloat(slider.attr('step')),					from 		= parseFloat(slider.attr('from')),					to 			= parseFloat(slider.attr('to')),					precision 	= (slider.attr('step').substring(slider.attr('step').indexOf("."))).length-1,					max 		= parseFloat((Math.ceil(to/step)*step).toFixed(precision)),					dimension 	= "&nbsp;"+slider.attr('dimension'),					showLimits 	= (slider.attr('showLimits') == "true"),					showLabels 	= (slider.attr('showLabels') == "true"),					input_from 	= slider.closest('.prfilter-variant').find('input[type="text"][slider="from"]'),					input_to 	= slider.closest('.prfilter-variant').find('input[type="text"][slider="to"]');				slider.slider({					animate: true,					step: step,					min: from,					max: max,					dimension: dimension,					showLimits: showLimits,					showLabels: showLabels,					input_from: input_from,					input_to: input_to,					slide: function( event, ui ) {},					stop: function(event, ui){						prfilter_GetProductsAjax($(this),prfilter, positionBlock);					}				});			}); 						//Categories and individual values descriptions			var descriptions = prfilter.attr('descriptions');			prfilter.removeAttr('descriptions');			if(typeof descriptions !='undefined' && descriptions!=''){				descriptionsObj = JSON.parse($.base64Decode(descriptions));				prfilter_CreateDescriptionIcons(descriptionsObj, prfilter, positionBlock);			}					 			//Parameters descriptions			var descriptions_params = prfilter.attr('descriptions_params');			prfilter.removeAttr('descriptions_params');			if(typeof descriptions_params !='undefined' && descriptions_params!=''){				descriptions_paramsObj = JSON.parse($.base64Decode(descriptions_params));					prfilter_CreateDescriptionVariantsIcons(descriptions_paramsObj, prfilter, positionBlock);			}						//Create uncheck group options			prfilter.find('.prfilter-option-title').each(function() {				option = $(this).closest('.prfilter-option');				$('<a href="javascript:void(0);" class="prfilter-uncheck" title="'+translate.unckeck+'"></a>').prependTo(option);				prfilter_CheckedSelected($(this));			});				//Close notify			$(document).on('click', '.prfilter-tip-hide', function() { 				prfilter.find('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});				xdr = true;			});							//Select templete			prfilter.on('change', 'select.prfilter-category-select-notemplate', function() { 				$('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});				var select = $(this), 				position = prfilter.attr('position'), 				colomns = prfilter.attr('colomns'), 				categoryID = select.val(), 				category_slug = select.find('option:selected').attr('category_slug'), 				output = prfilter.find('.prfilter-templete-ajax'),				currentTempleID = output.attr('currentTempleID');					prfilter.find('input[name="category_slug"]').val(category_slug);					if(xhr)xhr.abort();				select.attr('disabled',true);				output.fadeTo('fast',.5); 				xhr = $.ajax({   					url: set_query('?ukey=psearch'),					data: "action=get_template_ajax&categoryID="+categoryID+"&category_slug="+category_slug+"&position="+position+"&colomns="+colomns+"&isindex=true",					type: "POST",					dataType : "json",					timeout:8000,					success: function(returnData){ 						if(currentTempleID != returnData.templateID){							output.attr('currentTempleID',returnData.templateID);							if(returnData.html!=''){								prfilter.unbind().removeClass('prfiler-jsfunction').removeClass('prfiler-jsready');							}							output.html(returnData.html);								if(typeof returnData.descriptions !='undefined' && returnData.descriptions!=''){								descriptionsObj = JSON.parse(returnData.descriptions);								prfilter_CreateDescriptionIcons(descriptionsObj, prfilter, positionBlock);							}							if(typeof returnData.descriptions_params !='undefined' && returnData.descriptions_params!=''){								descriptions_paramsObj = JSON.parse(returnData.descriptions_params);								prfilter_CreateDescriptionVariantsIcons(descriptions_paramsObj, prfilter, positionBlock);							}													}else{							var priceSlider = prfilter.find('div.prfilter-slider[name="price"]');							if(priceSlider.length>0){								priceSlider.attr('to',returnData.maxPrice);								priceSlider.slider('setMax',returnData.maxPrice);								prfilter_CheckedSelected(priceSlider);							}						}						output.fadeTo('fast',1); 						select.attr('disabled',false);					},					error: function(){ 						output.fadeTo('fast',1); 						select.attr('disabled',false);					},				});			});					//Select templete			prfilter.on('change', 'select.prfilter-category-select', function() { 				$('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});				var select = $(this), 				categoryID = select.val(),				category_slug = select.find('option:selected').attr('category_slug');				prfilter.find('input[name="category_slug"]').val(category_slug);					prfilter_DisableAllIfNoCategory(select);								if(xhr)xhr.abort();				select.attr('disabled',true);				xhr = $.ajax({   					url: set_query('?ukey=psearch'),					data: "action=get_categorymaxprice_ajax&categoryID="+categoryID,					type: "POST",					dataType : "json",					timeout:8000,					success: function(returnData){ 						var priceSlider = prfilter.find('div.prfilter-slider[name="price"]');						if(priceSlider.length>0){							priceSlider.attr('to',returnData.maxPrice);							priceSlider.slider('setMax',returnData.maxPrice);							prfilter_CheckedSelected(priceSlider);						}						select.attr('disabled',false);					},					error: function(){ 						select.attr('disabled',false);					},				});			});					//Select category block			if(prfilter.find('select.prfilter-category-select').length>0){				var selectcategory = prfilter.find('select.prfilter-category-select');				prfilter_DisableAllIfNoCategory(selectcategory);			}				}	});	});$(document).ready(function() {	$('.prfilter').each(function(){		var prfilter = $(this);		if(!prfilter.hasClass('prfiler-jsready')){			prfilter.addClass('prfiler-jsready');					//+ And - icons			prfilter.find('a.prfilter-category-title').each(function(){$(this).find('i').addClass($(this).next('.prfilter-options').is(":visible")?"prfilter-minus":"prfilter-plus");});			prfilter.find('a.prfilter-option-title').each(function(){$(this).find('i').addClass($(this).closest('.prfilter-option').find('.prfilter-variants:first').is(":visible")?"prfilter-minus":"prfilter-plus");});						//Excluded params			var excluded = prfilter.attr('excluded');			prfilter.removeAttr('excluded');			if(typeof excluded !='undefined' && excluded!=''){				excludedObj = JSON.parse($.base64Decode(excluded));				$.each( excludedObj, function( key, option ) {					prfilter.find('[variant="'+option+'"]').closest('label').addClass('disabled');					prfilter.find('[variant="'+option+'"]').attr('disabled',true);				});			}			prfilter_CheckedSelectedAll(prfilter);		}	});});//Get ajax products countfunction prfilter_GetProductsAjax(item, prfilter, positionBlock){	var values = prfilter.find('.prfilter-form').serialize();	prfilter_CheckedSelected(item);	prfilter_CheckedSelectedAll(prfilter);	var blockID = '#'+prfilter.find('form').attr('id');	if(xhr)xhr.abort();	xhr = $.ajax({   		url: set_query('?ukey=psearch'),		data: "action=get_products_ajax&"+values,		type: "POST",		timeout:8000,		dataType : "json",		success: function(returnData){ 			var div_pos = prfilter.offset().left,			div_width = prfilter.outerWidth(true),			item_pos = item.offset().left,			item_width = item.outerWidth(true);			switch(positionBlock){				case 'left':					var alignX = 'right';					var alignY = 'center';					var offsetX = (div_pos+div_width)-(item_pos+item_width);					var offsetY	= 0;				break;				case 'right':					var alignX = 'left';					var alignY = 'center';					var offsetX = -(div_pos-item_pos);					var offsetY	= 0;				break;				case 'center':					var alignX = 'left';					var alignY = 'center';					var offsetX	= 10;					var offsetY	= 0;				break;			}			$('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});			prfilter.find('.prfilter-info-description-category, .prfilter-info-description-param').removeClass('prfilter-info-loading');			item.poshytip({				content		: ((returnData.count>0)?translate.founded.replace("%d", returnData.count).replace("%blockID%", "'"+blockID+"'"):translate.nofounded)+'<a href="javascript:void(0);" class="prfilter-tip-hide" title="'+translate.hidetip+'"></a>',				showOn		: 'none',				className	: 'prfilter-tip',				alignTo		: 'target',				alignX		: alignX,				alignY		: alignY,				showTimeout	: 0,					hideTimeout	: 0,				offsetX		: offsetX,				offsetY		: offsetY			});			item.poshytip('show');			xdr = false;			window.clearTimeout(timer);			timer = window.setTimeout(function() {item.poshytip('destroy'); xdr = true;}, 5000);				$('.prfilter-tip').on('mouseenter', function () {window.clearTimeout(timer);}).on('mouseleave',  function(){timer = window.setTimeout(function() {item.poshytip('destroy'); xdr = true;}, 1000);});			prfilter.find('input[type="checkbox"], input[type="radio"], input[type="text"], select, option').each(function(){				$(this).attr('disabled',false); 				$(this).closest('label').removeClass('disabled');			});				$.each( returnData.excluded, function( key, option ) {				prfilter.find('[variant="'+option+'"]').closest('label').addClass('disabled');				prfilter.find('[variant="'+option+'"]').attr('disabled',true);			});		}	});	return true;}//Show/Hide uncheck params for categoryfunction prfilter_CheckedSelected(item){	var parent = item.closest('.prfilter-option'), i = 0, uncheck = parent.find('.prfilter-uncheck');	if(parent.find('input[type="checkbox"]:checked').length > 0) i++;	if(parent.find('input[type="radio"]').length > 0){ parent.find('input[type="radio"]:checked').each(function(){ if($(this).val()!='') i++; })}		if(parent.find('input[type="text"]').length > 0){ parent.find('input[type="text"]').each(function(){ if($(this).val()!='') i++; })}		if(parent.find('select').length > 0){ parent.find('select').each(function(){ if($(this).val()!='') i++; })}		if(i>0){ uncheck.show('fast'); }else{ uncheck.hide('fast');	}	return true;}//Show/Hide uncheck all paramsfunction prfilter_CheckedSelectedAll(prfilter){	var i = 0, uncheck = prfilter.find('.prfilter-uncheck-all');	if(prfilter.find('input[type="checkbox"]:checked').length > 0) i++;	if(prfilter.find('input[type="radio"]').length > 0){ prfilter.find('input[type="radio"]:checked').each(function(){ if($(this).val()!='') i++; })}		if(prfilter.find('input[type="text"]').length > 0){ prfilter.find('input[type="text"]').each(function(){ if($(this).val()!='') i++; })}		if(prfilter.find('select').length > 0){ prfilter.find('select').each(function(){ if($(this).val()!='' && !$(this).hasClass('prfilter-category-select-notemplate') && !$(this).hasClass('prfilter-category-select')) i++; })}		if(i>0){ uncheck.removeClass('prfilter-uncheck-all-disabled'); }else{ uncheck.addClass('prfilter-uncheck-all-disabled');}	return true;}//Disable all options if category not selectedfunction prfilter_DisableAllIfNoCategory(select){	var prfilter = select.closest('.prfilter');	if(select.val()=='0'){		prfilter.find('.prfilter-variant label').each(function(){	$(this).addClass('disabled');	});		prfilter.find('input[type="checkbox"]').each(function(){	$(this).attr('disabled',true);	});		prfilter.find('input[type="radio"]').each(function(){		$(this).attr('disabled',true);	});		prfilter.find('input[type="text"]').each(function(){		$(this).attr('disabled',true);	});		prfilter.find('select').each(function(){ if(!$(this).hasClass('prfilter-category-select')){ $(this).attr('disabled',true);}});		prfilter.find('.prfilter-slider').each(function(){ $(this).slider('disabled',true);			}); 			prfilter.find('.prfilter-submit').hide();		prfilter.find('.prfilter-uncheck').hide('fast');	}else{		prfilter.find('.prfilter-variant label').each(function(){	$(this).removeClass('disabled');});		prfilter.find('input[type="checkbox"]').each(function(){	$(this).attr('disabled',false);	});		prfilter.find('input[type="radio"]').each(function(){		$(this).attr('disabled',false);	});		prfilter.find('input[type="text"]').each(function(){		$(this).attr('disabled',false);	});		prfilter.find('select').each(function(){ if(!$(this).hasClass('prfilter-category-select')){ $(this).attr('disabled',false);}});		prfilter.find('.prfilter-slider').each(function(){ $(this).slider('disabled',false);		}); 		prfilter.find('.prfilter-submit').show();		prfilter.find('.prfilter-option-title').each(function() { prfilter_CheckedSelected($(this)); });	}	return true;}//Create description icon if it existsfunction prfilter_CreateDescriptionIcons(obj, parent, positionBlock){	$.each( obj, function( key, optionID ) {		var optionDiv = parent.find('.prfilter-option[optionID="'+optionID+'"]'),			infoicon = $('<a href="javascript:void(0);" class="prfilter-info prfilter-info-description-category"></a>'),			urltitle = optionDiv.find('.prfilter-option-title'),			uncheck = optionDiv.find('.prfilter-uncheck'),			urlrecomend = optionDiv.find('.prfilter-shownotrecomended:visible'),			label = optionDiv.find('.prfilter-variant label'),			labelimage = optionDiv.find('.prfilter-variant label').find('img'),			labelimagelabel = optionDiv.find('.prfilter-variant label.prfilter-variant-labelimagetext');			if(uncheck.length>0){			infoicon.insertAfter(uncheck);		}else if(urltitle.length>0){			infoicon.prependTo(optionDiv);		}else if(label.length>0&&labelimage.length==0){			infoicon.insertAfter(label);		}else if(labelimagelabel.length==0){			label.addClass('prfilter-info-description-category');			infoicon = label;		}else{			infoicon.appendTo(labelimagelabel);		}				infoicon.on('mouseenter', function () { 				infoicon.addClass('prfilter-info-loading');			xdr = true;			parent.find('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});						if(xhr)xhr.abort();						xhr = $.ajax({   				url: set_query('?ukey=psearch'),				data: "action=get_option_description_ajax&optionID="+optionID,				type: "POST",				timeout:8000,				dataType : "json",				success: function(returnData){ 					xdr = false;					var tohtml ='';					if(returnData.title){ tohtml+='<div class="prfilter-tip-description-title">'+returnData.title+'</div>';}					tohtml+='<div>'+returnData.text+'</div>';						var div_pos = parent.offset().left,						div_width = parent.outerWidth(true),						item_pos = infoicon.offset().left,						item_width = infoicon.outerWidth(true);						switch(positionBlock){						case 'left':							var alignX = 'right';							var alignY = 'center';							var offsetX = (div_pos+div_width)-(item_pos+item_width);							var offsetY	= 0;						break;						case 'right':							var alignX = 'left';							var alignY = 'center';							var offsetX = -(div_pos-item_pos);							var offsetY	= 0;						break;						case 'center':							var alignX = 'center';							var alignY = 'top';							var offsetX	= 0;							var offsetY	= 10;						break;					}						infoicon.poshytip({						content		: tohtml,						showOn		: 'none',						className	: 'prfilter-tip-description',						alignTo		: 'target',						alignX		: alignX,						alignY		: alignY,						offsetX		: offsetX,						offsetY		: offsetY					});					infoicon.poshytip('show');						infoicon.removeClass('prfilter-info-loading');									}			});		}).on('mouseleave',infoicon,  function(){			if(xhr)xhr.abort(); xdr = true; infoicon.poshytip('destroy'); infoicon.removeClass('prfilter-info-loading');		});	});	return true;}//Create description variants icon if it existsfunction prfilter_CreateDescriptionVariantsIcons(obj, parent, positionBlock){	$.each( obj, function( key, variantID ) {		var infoicon = $('<a href="javascript:void(0);" class="prfilter-info prfilter-info-description-param"></a>');		var label = parent.find('.prfilter-variant[variantID="'+variantID+'"]').find('label');		var labelimage = parent.find('.prfilter-variant[variantID="'+variantID+'"]').find('label').find('img');		var labelimagelabel = parent.find('.prfilter-variant[variantID="'+variantID+'"]').find('label.prfilter-variant-labelimagetext');				if(label.length>0&&labelimage.length==0){			infoicon.insertAfter(label);		}else if(labelimagelabel.length==0){			label.addClass('prfilter-info-description-param');			infoicon = label;		}else{			infoicon.appendTo(labelimagelabel);		}			infoicon.on('mouseenter', function () { 				if(!xdr)return false;			infoicon.addClass('prfilter-info-loading');			parent.find('input,select,option,div,span,img, .prfilter-info-description-category, .prfilter-info-description-param, .prfilter-option-title, .prfilter-uncheck-all').each(function(){ $(this).poshytip('destroy');});						if(xhr)xhr.abort();						xhr = $.ajax({   				url: set_query('?ukey=psearch'),				data: "action=get_variant_description_ajax&variantID="+variantID,				type: "POST",				timeout:8000,				dataType : "json",				success: function(returnData){ 					var tohtml ='';					if(returnData.title){ tohtml+='<div class="prfilter-tip-description-title">'+returnData.title+'</div>';}					tohtml+='<div>'+returnData.text+'</div>';						var div_pos = parent.offset().left,						div_width = parent.outerWidth(true),						item_pos = infoicon.offset().left,						item_width = infoicon.outerWidth(true);						switch(positionBlock){						case 'left':							var alignX = 'right';							var alignY = 'center';							var offsetX = (div_pos+div_width)-(item_pos+item_width);							var offsetY	= 0;						break;						case 'right':							var alignX = 'left';							var alignY = 'center';							var offsetX = -(div_pos-item_pos);							var offsetY	= 0;						break;						case 'center':							var alignX = 'center';							var alignY = 'top';							var offsetX	= 0;							var offsetY	= 10;						break;					}						infoicon.poshytip({						content		: tohtml,						showOn		: 'none',						className	: 'prfilter-tip-description',						alignTo		: 'target',						alignX		: alignX,						alignY		: alignY,						offsetX		: offsetX,						offsetY		: offsetY					});					infoicon.poshytip('show');						infoicon.removeClass('prfilter-info-loading');									}			});		}).on('mouseleave',infoicon,  function(){			if(xhr)xhr.abort(); infoicon.poshytip('destroy'); infoicon.removeClass('prfilter-info-loading');		});	});	return true;}